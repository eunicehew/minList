{"ast":null,"code":"import { pageService } from \"../services/PageService\";\nimport { getItems } from \"./Item\";\nimport { successAlert, errorAlert } from \"./Alert\"; //Actions\n\nconst LIST_REQUEST = \"components/common/LIST_REQUEST\";\nconst LIST_SUCCESS = \"components/common/LIST_SUCCESS\";\nconst LIST_FAILURE = \"components/common/LIST_FAILURE\";\nconst initialState = {\n  lists: [],\n  loading: false\n}; //Reducer\n\nexport default function listReducer(state = initialState, action) {\n  switch (action.type) {\n    case LIST_REQUEST:\n      return Object.assign({}, state, {\n        loading: true\n      });\n\n    case LIST_SUCCESS:\n      console.log(action.lists);\n      console.log([...state.lists, action.lists]);\n      return Object.assign({}, state, {\n        lists: [...state.lists, action.lists],\n        // lists: (state.lists.find((list) => list._id === action.lists._id) &&\n        //   state.lists.map((list) =>\n        //     action.lists._id === list._id ? action.lists : list\n        //   )) || [...state.lists, action.lists],\n        loading: false\n      });\n\n    case LIST_FAILURE:\n      return Object.assign({}, state, {\n        error: action.error,\n        loading: false\n      });\n\n    default:\n      return state;\n  }\n} //Action Creators\n\nfunction failure(error) {\n  return {\n    type: LIST_FAILURE,\n    error\n  };\n}\n\nexport function getLists(sheetId) {\n  return dispatch => {\n    dispatch({\n      type: LIST_REQUEST\n    });\n    pageService.getSheets(sheetId).then(lists => {\n      // console.log(lists);\n      dispatch({\n        type: LIST_SUCCESS,\n        lists\n      });\n\n      if (lists && lists.length > 0) {\n        // console.log(lists[0]._id);\n        lists.map(list => {\n          return dispatch(getItems(list._id));\n        });\n      }\n    }, error => {\n      dispatch(failure(error.toString()));\n      dispatch(errorAlert(error.toString()));\n    });\n  };\n}\n\nfunction _getLists(sheetId) {\n  return dispatch => {\n    dispatch({\n      type: LIST_REQUEST\n    });\n    pageService.getSheets(sheetId).then(lists => {\n      // console.log(lists);\n      dispatch({\n        type: LIST_SUCCESS,\n        lists\n      });\n    }, error => {\n      dispatch(failure(error.toString()));\n      dispatch(errorAlert(error.toString()));\n    });\n  };\n}\n\nfunction _handleAction(apiCall, body, action) {\n  return dispatch => {\n    dispatch({\n      type: LIST_REQUEST\n    });\n    apiCall(body).then(lists => {\n      // console.log(lists);\n      dispatch(successAlert(\"Successfully \" + action + \" list\"));\n      dispatch(_getLists(body.pageId));\n    }, error => {\n      dispatch(failure(error.toString()));\n      dispatch(errorAlert(error.toString()));\n    });\n  };\n} //sheet functions double for lists\n\n\nexport function addList(body) {\n  return _handleAction(pageService.createSheet, body, \"added\");\n}\nexport function deleteList(body) {\n  return _handleAction(pageService.deleteList, body, \"deleted\");\n}\nexport function editList(body) {\n  return _handleAction(pageService.update, body, \"updated\");\n}","map":{"version":3,"sources":["/Users/Eunice/Documents/my-app/client/src/redux/List.js"],"names":["pageService","getItems","successAlert","errorAlert","LIST_REQUEST","LIST_SUCCESS","LIST_FAILURE","initialState","lists","loading","listReducer","state","action","type","Object","assign","console","log","error","failure","getLists","sheetId","dispatch","getSheets","then","length","map","list","_id","toString","_getLists","_handleAction","apiCall","body","pageId","addList","createSheet","deleteList","editList","update"],"mappings":"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","sourcesContent":["import { pageService } from \"../services/PageService\";\nimport { getItems } from \"./Item\";\nimport { successAlert, errorAlert } from \"./Alert\";\n\n//Actions\nconst LIST_REQUEST = \"components/common/LIST_REQUEST\";\nconst LIST_SUCCESS = \"components/common/LIST_SUCCESS\";\nconst LIST_FAILURE = \"components/common/LIST_FAILURE\";\n\nconst initialState = { lists: [], loading: false };\n\n//Reducer\nexport default function listReducer(state = initialState, action) {\n  switch (action.type) {\n    case LIST_REQUEST:\n      return Object.assign({}, state, {\n        loading: true,\n      });\n    case LIST_SUCCESS:\n      console.log(action.lists);\n      console.log([...state.lists, action.lists]);\n      return Object.assign({}, state, {\n        lists: [...state.lists, action.lists],\n        // lists: (state.lists.find((list) => list._id === action.lists._id) &&\n        //   state.lists.map((list) =>\n        //     action.lists._id === list._id ? action.lists : list\n        //   )) || [...state.lists, action.lists],\n        loading: false,\n      });\n    case LIST_FAILURE:\n      return Object.assign({}, state, {\n        error: action.error,\n        loading: false,\n      });\n    default:\n      return state;\n  }\n}\n\n//Action Creators\nfunction failure(error) {\n  return { type: LIST_FAILURE, error };\n}\n\nexport function getLists(sheetId) {\n  return (dispatch) => {\n    dispatch({ type: LIST_REQUEST });\n    pageService.getSheets(sheetId).then(\n      (lists) => {\n        // console.log(lists);\n        dispatch({ type: LIST_SUCCESS, lists });\n        if (lists && lists.length > 0) {\n          // console.log(lists[0]._id);\n          lists.map((list) => {\n            return dispatch(getItems(list._id));\n          });\n        }\n      },\n      (error) => {\n        dispatch(failure(error.toString()));\n        dispatch(errorAlert(error.toString()));\n      }\n    );\n  };\n}\n\nfunction _getLists(sheetId) {\n  return (dispatch) => {\n    dispatch({ type: LIST_REQUEST });\n    pageService.getSheets(sheetId).then(\n      (lists) => {\n        // console.log(lists);\n        dispatch({ type: LIST_SUCCESS, lists });\n      },\n      (error) => {\n        dispatch(failure(error.toString()));\n        dispatch(errorAlert(error.toString()));\n      }\n    );\n  };\n}\n\nfunction _handleAction(apiCall, body, action) {\n  return (dispatch) => {\n    dispatch({ type: LIST_REQUEST });\n    apiCall(body).then(\n      (lists) => {\n        // console.log(lists);\n        dispatch(successAlert(\"Successfully \" + action + \" list\"));\n        dispatch(_getLists(body.pageId));\n      },\n      (error) => {\n        dispatch(failure(error.toString()));\n        dispatch(errorAlert(error.toString()));\n      }\n    );\n  };\n}\n\n//sheet functions double for lists\nexport function addList(body) {\n  return _handleAction(pageService.createSheet, body, \"added\");\n}\nexport function deleteList(body) {\n  return _handleAction(pageService.deleteList, body, \"deleted\");\n}\nexport function editList(body) {\n  return _handleAction(pageService.update, body, \"updated\");\n}\n"]},"metadata":{},"sourceType":"module"}