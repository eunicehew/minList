{"ast":null,"code":"import { itemService } from \"../services/ItemService\";\nimport { successAlert, errorAlert } from \"./Alert\"; //Actions\n\nconst ITEM_REQUEST = \"components/common/ITEM_REQUEST\";\nconst ITEM_SUCCESS = \"components/common/ITEM_SUCCESS\";\nconst ITEM_MOVE_SUCCESS = \"components/common/ITEM_MOVE_SUCCESS\";\nconst ITEM_FAILURE = \"components/common/ITEM_FAILURE\";\nconst initialState = {\n  items: [],\n  loading: false,\n  listIdLoading: []\n}; //Reducer\n\nexport default function itemReducer(state = initialState, action) {\n  switch (action.type) {\n    case ITEM_REQUEST:\n      console.log([...state.listIdLoading, action.listId]);\n      return Object.assign({}, state, {\n        loading: true,\n        listIdLoading: [...state.listIdLoading, action.listId]\n      });\n\n    case ITEM_SUCCESS:\n      return Object.assign({}, state, {\n        items: state.items.find(item => item._id === action.items._id) && state.items.map(item => action.items._id === item._id ? action.items : item) || [...state.items, action.items],\n        loading: false,\n        listIdLoading: []\n      });\n\n    case ITEM_MOVE_SUCCESS:\n      return Object.assign({}, state, {\n        loading: false,\n        listIdLoading: []\n      });\n\n    case ITEM_FAILURE:\n      return Object.assign({}, state, {\n        error: action.error,\n        loading: false,\n        listIdLoading: []\n      });\n\n    default:\n      return state;\n  }\n} //Action Creators\n\nfunction failure(error) {\n  return {\n    type: ITEM_FAILURE,\n    error\n  };\n}\n\nexport function getItems(listId) {\n  return dispatch => {\n    dispatch({\n      type: ITEM_REQUEST,\n      listId\n    });\n    itemService.getItems(listId).then(items => {\n      // console.log(items);\n      dispatch({\n        type: ITEM_SUCCESS,\n        items\n      });\n    }, error => {\n      dispatch(failure(error.toString()));\n      dispatch(errorAlert(error.toString()));\n    });\n  };\n}\nexport function moveItem(body) {\n  console.log(body);\n  return dispatch => {\n    dispatch({\n      type: ITEM_REQUEST,\n      listId: body.listId\n    });\n    itemService.getParentList(body.itemId).then(parentList => {\n      console.log(parentList);\n      body.parentListId = parentList._id;\n      let itemsToSearch = parentList._id === body.listId ? parentList.items : body.items;\n      console.log(itemsToSearch);\n      body.index = body.bottomItem !== 0 && itemsToSearch.findIndex(i => i._id === body.bottomItem) !== -1 ? itemsToSearch.findIndex(i => i._id === body.bottomItem) : body.bottomItem !== 0 ? body.bottomItem : 0;\n      console.log(body.index);\n      itemService.moveItem(body).then(() => {\n        dispatch({\n          type: ITEM_MOVE_SUCCESS\n        });\n        dispatch(getItems(body.listId));\n        dispatch(getItems(body.parentListId));\n        dispatch(successAlert(\"Successfully moved item\"));\n      }, error => {\n        dispatch(failure(error.toString()));\n        dispatch(errorAlert(error.toString()));\n      });\n    }, error => {\n      dispatch(failure(error.toString()));\n      dispatch(errorAlert(error.toString()));\n    });\n  };\n}\n\nfunction _handleAction(apiCall, body, action) {\n  return dispatch => {\n    dispatch({\n      type: ITEM_REQUEST\n    });\n    apiCall(body).then(items => {\n      // console.log(items);\n      dispatch(successAlert(\"Successfully \" + action + \" item\"));\n      dispatch(getItems(body.listId));\n    }, error => {\n      dispatch(failure(error.toString()));\n      dispatch(errorAlert(error.toString()));\n    });\n  };\n}\n\nexport function addItem(body) {\n  return _handleAction(itemService.create, body, \"added\");\n}\nexport function deleteItem(body) {\n  return _handleAction(itemService.deleteItem, body, \"deleted\");\n}\nexport function editItem(body) {\n  return _handleAction(itemService.update, body, \"updated\");\n}","map":{"version":3,"sources":["/Users/Eunice/Documents/my-app/client/src/redux/Item.js"],"names":["itemService","successAlert","errorAlert","ITEM_REQUEST","ITEM_SUCCESS","ITEM_MOVE_SUCCESS","ITEM_FAILURE","initialState","items","loading","listIdLoading","itemReducer","state","action","type","console","log","listId","Object","assign","find","item","_id","map","error","failure","getItems","dispatch","then","toString","moveItem","body","getParentList","itemId","parentList","parentListId","itemsToSearch","index","bottomItem","findIndex","i","_handleAction","apiCall","addItem","create","deleteItem","editItem","update"],"mappings":"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","sourcesContent":["import { itemService } from \"../services/ItemService\";\nimport { successAlert, errorAlert } from \"./Alert\";\n\n//Actions\nconst ITEM_REQUEST = \"components/common/ITEM_REQUEST\";\nconst ITEM_SUCCESS = \"components/common/ITEM_SUCCESS\";\nconst ITEM_MOVE_SUCCESS = \"components/common/ITEM_MOVE_SUCCESS\";\nconst ITEM_FAILURE = \"components/common/ITEM_FAILURE\";\n\nconst initialState = { items: [], loading: false, listIdLoading: [] };\n\n//Reducer\nexport default function itemReducer(state = initialState, action) {\n  switch (action.type) {\n    case ITEM_REQUEST:\n      console.log([...state.listIdLoading, action.listId])\n      return Object.assign({}, state, {\n        loading: true,\n        listIdLoading: [...state.listIdLoading, action.listId],\n      });\n    case ITEM_SUCCESS:\n      return Object.assign({}, state, {\n        items: (state.items.find((item) => item._id === action.items._id) &&\n          state.items.map((item) =>\n            action.items._id === item._id ? action.items : item\n          )) || [...state.items, action.items],\n        loading: false,\n        listIdLoading: [],\n      });\n    case ITEM_MOVE_SUCCESS:\n      return Object.assign({}, state, {\n        loading: false,\n        listIdLoading: [],\n      });\n    case ITEM_FAILURE:\n      return Object.assign({}, state, {\n        error: action.error,\n        loading: false,\n        listIdLoading: [],\n      });\n    default:\n      return state;\n  }\n}\n\n//Action Creators\nfunction failure(error) {\n  return { type: ITEM_FAILURE, error };\n}\n\nexport function getItems(listId) {\n  return (dispatch) => {\n    dispatch({ type: ITEM_REQUEST, listId });\n    itemService.getItems(listId).then(\n      (items) => {\n        // console.log(items);\n        dispatch({ type: ITEM_SUCCESS, items });\n      },\n      (error) => {\n        dispatch(failure(error.toString()));\n        dispatch(errorAlert(error.toString()));\n      }\n    );\n  };\n}\n\n\nexport function moveItem(body) {\n  console.log(body)\n  return (dispatch) => {\n    dispatch({ type: ITEM_REQUEST, listId: body.listId });\n    itemService.getParentList(body.itemId).then(\n      (parentList) => {\n        console.log(parentList)\n        body.parentListId = parentList._id;\n        let itemsToSearch = parentList._id === body.listId ? parentList.items : body.items \n        \n        console.log(itemsToSearch)\n        body.index = \n        body.bottomItem !== 0 && itemsToSearch.findIndex((i) => i._id === body.bottomItem) !== -1\n          ? itemsToSearch.findIndex((i) => i._id === body.bottomItem)\n          : body.bottomItem !== 0 ? body.bottomItem : 0;\n          \n        console.log(body.index)\n        itemService.moveItem(body).then(\n          () => {\n            dispatch({ type: ITEM_MOVE_SUCCESS });\n            dispatch(getItems(body.listId));\n            dispatch(getItems(body.parentListId));\n            dispatch(successAlert(\"Successfully moved item\"));\n          },\n          (error) => {\n            dispatch(failure(error.toString()));\n            dispatch(errorAlert(error.toString()));\n          }\n        );\n      },\n      (error) => {\n        dispatch(failure(error.toString()));\n        dispatch(errorAlert(error.toString()));\n      }\n    );\n  };\n}\n\n\nfunction _handleAction(apiCall, body, action) {\n  return (dispatch) => {\n    dispatch({ type: ITEM_REQUEST });\n    apiCall(body).then(\n      (items) => {\n        // console.log(items);\n        dispatch(successAlert(\"Successfully \" + action + \" item\"));\n        dispatch(getItems(body.listId));\n      },\n      (error) => {\n        dispatch(failure(error.toString()));\n        dispatch(errorAlert(error.toString()));\n      }\n    );\n  };\n}\n\nexport function addItem(body) {\n  return _handleAction(itemService.create, body, \"added\");\n}\nexport function deleteItem(body) {\n  return _handleAction(itemService.deleteItem, body, \"deleted\");\n}\nexport function editItem(body) {\n  return _handleAction(itemService.update, body, \"updated\");\n}\n"]},"metadata":{},"sourceType":"module"}