{"ast":null,"code":"var _jsxFileName = \"/Users/Eunice/Documents/my-app/client/src/components/common/List/List.js\";\nimport React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport List from \"@material-ui/core/List\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { EditableListItem } from \"./ListItems\";\nimport { AddDialog } from \"../Dialog.js\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst DraggableList = ({\n  sheetId,\n  listId,\n  header,\n  items,\n  deleteList,\n  moveItem,\n  addItem,\n  editItem,\n  deleteItem,\n  itemLoading,\n  listIdLoading\n}) => {\n  const useStyles = makeStyles(theme => ({\n    card: {\n      maxHeight: \"30vh\",\n      width: \"25vw\",\n      position: \"relative\"\n    },\n    // header: { padding: theme.spacing(1, 2, 0, 2) },\n    content: {\n      height: \"20vh\",\n      overflowY: \"auto\",\n      padding: theme.spacing(0, 2)\n    },\n    addButton: {\n      position: \"absolute\",\n      bottom: \"2vh\",\n      right: \"4vh\"\n    },\n    hide: {\n      display: \"none\"\n    }\n  }));\n  const classes = useStyles();\n  let state = {\n    items: [],\n    bottomItem: 0\n  };\n  useEffect(() => {\n    const listObj = items.find(itemObj => itemObj._id === list._id);\n    state.items = listObj ? listObj.items : [];\n    console.log(state.items);\n  }, [items]);\n\n  function setBottomItem(newItem) {\n    state.bottomItem = newItem;\n  }\n\n  const onDragOver = event => {\n    event.preventDefault();\n    event.currentTarget.style.background = \"lightgray\"; // event.currentTarget.style.cursor = \"grabbing\";\n  };\n\n  const onDrop = (event, listId, items, moveItem, bottomItem) => {\n    event.preventDefault();\n    event.currentTarget.style.background = \"\"; // event.currentTarget.style.cursor = \"default\";\n\n    let itemId = event.dataTransfer.getData(\"item\");\n    let index = bottomItem !== items.length && bottomItem !== 0 && items.findIndex(i => i._id === bottomItem) !== -1 ? items.findIndex(i => i._id === bottomItem) : bottomItem;\n    let body = {\n      listId,\n      index,\n      itemId\n    };\n    moveItem(body);\n  };\n\n  const onDragLeave = event => {\n    event.currentTarget.style.background = \"\";\n  };\n\n  const onDragOverItem = event => {\n    event.preventDefault();\n    event.currentTarget.style.background = \"lightblue\";\n  };\n\n  const onDropItem = (event, item, bottomItem, setBottomItem) => {\n    event.preventDefault();\n    event.currentTarget.style.background = \"\";\n\n    if (item !== bottomItem) {\n      bottomItem = item;\n      setBottomItem(item);\n      console.log(\"set\" + item);\n    }\n  };\n\n  const onDragLeaveItem = event => {\n    event.currentTarget.style.background = \"\";\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: classes.card,\n    onDragOver: event => onDragOver(event),\n    onDrop: event => onDrop(event, listId, state.items, moveItem, state.bottomItem),\n    onDragLeave: event => onDragLeave(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader // className={classes.header}\n  , {\n    title: /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      onDrop: event => onDropItem(event, 0, state.bottomItem, setBottomItem),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, header),\n    action: /*#__PURE__*/React.createElement(IconButton, {\n      edge: \"end\",\n      \"aria-label\": \"delete\",\n      onClick: () => deleteList({\n        listId,\n        pageId: sheetId\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CloseIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, state.items && state.items.length > 0 ? state.items.map(item => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: item._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, itemLoading && listIdLoading.includes(listId) ? /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }) : /*#__PURE__*/React.createElement(EditableListItem, {\n      draggableItem: true,\n      item: item,\n      listId: listId // sheetId={sheetId}\n      ,\n      deleteFunction: () => deleteItem({\n        listId,\n        itemId: item._id\n      }),\n      deleteIcon: /*#__PURE__*/React.createElement(IconButton, {\n        edge: \"end\",\n        \"aria-label\": \"delete\",\n        onClick: () => deleteItem({\n          listId,\n          itemId: item._id\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(DeleteIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 27\n        }\n      })),\n      editFunction: editItem,\n      onDragOver: event => onDragOverItem(event),\n      onDrop: event => onDropItem(event, item._id, state.bottomItem, setBottomItem),\n      onDragLeave: event => onDragLeaveItem(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    }));\n  }) : /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    variant: \"h6\",\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, \"No items\"))), /*#__PURE__*/React.createElement(CardActions, {\n    onDrop: event => onDropItem(event, items.length, state.bottomItem, setBottomItem),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.addButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AddDialog, {\n    header: \"Add Item\",\n    fields: {\n      \"Item Name\": \"name\"\n    },\n    addFunction: addItem,\n    body: {\n      listId: listId,\n      sheetId: sheetId\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }))));\n};\n\nDraggableList.propTypes = {\n  sheetId: PropTypes.string.isRequired,\n  listId: PropTypes.string.isRequired,\n  header: PropTypes.string.isRequired,\n  items: PropTypes.arrayOf(PropTypes.shape({\n    _id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    subItems: PropTypes.array.isRequired\n  })).isRequired,\n  itemLoading: PropTypes.bool.isRequired,\n  deleteList: PropTypes.func.isRequired,\n  moveItem: PropTypes.func.isRequired,\n  addItem: PropTypes.func.isRequired,\n  // editItem: PropTypes.func.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\nexport { DraggableList };","map":{"version":3,"sources":["/Users/Eunice/Documents/my-app/client/src/components/common/List/List.js"],"names":["React","useEffect","PropTypes","makeStyles","Card","CardHeader","CardContent","CardActions","List","CircularProgress","EditableListItem","AddDialog","IconButton","CloseIcon","DeleteIcon","Typography","DraggableList","sheetId","listId","header","items","deleteList","moveItem","addItem","editItem","deleteItem","itemLoading","listIdLoading","useStyles","theme","card","maxHeight","width","position","content","height","overflowY","padding","spacing","addButton","bottom","right","hide","display","classes","state","bottomItem","listObj","find","itemObj","_id","list","console","log","setBottomItem","newItem","onDragOver","event","preventDefault","currentTarget","style","background","onDrop","itemId","dataTransfer","getData","index","length","findIndex","i","body","onDragLeave","onDragOverItem","onDropItem","item","onDragLeaveItem","pageId","map","includes","propTypes","string","isRequired","arrayOf","shape","name","subItems","array","bool","func"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,SAASC,gBAAT,QAAiC,aAAjC;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;;AAEA,MAAMC,aAAa,GAAG,CAAC;AACrBC,EAAAA,OADqB;AAErBC,EAAAA,MAFqB;AAGrBC,EAAAA,MAHqB;AAIrBC,EAAAA,KAJqB;AAKrBC,EAAAA,UALqB;AAMrBC,EAAAA,QANqB;AAOrBC,EAAAA,OAPqB;AAQrBC,EAAAA,QARqB;AASrBC,EAAAA,UATqB;AAUrBC,EAAAA,WAVqB;AAWrBC,EAAAA;AAXqB,CAAD,KAYhB;AACJ,QAAMC,SAAS,GAAGzB,UAAU,CAAE0B,KAAD,KAAY;AACvCC,IAAAA,IAAI,EAAE;AACJC,MAAAA,SAAS,EAAE,MADP;AAEJC,MAAAA,KAAK,EAAE,MAFH;AAGJC,MAAAA,QAAQ,EAAE;AAHN,KADiC;AAMvC;AACAC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EAAE,MADD;AAEPC,MAAAA,SAAS,EAAE,MAFJ;AAGPC,MAAAA,OAAO,EAAER,KAAK,CAACS,OAAN,CAAc,CAAd,EAAiB,CAAjB;AAHF,KAP8B;AAavCC,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAE,UADD;AAETO,MAAAA,MAAM,EAAE,KAFC;AAGTC,MAAAA,KAAK,EAAE;AAHE,KAb4B;AAkBvCC,IAAAA,IAAI,EAAE;AACJC,MAAAA,OAAO,EAAE;AADL;AAlBiC,GAAZ,CAAD,CAA5B;AAuBA,QAAMC,OAAO,GAAGhB,SAAS,EAAzB;AAEA,MAAIiB,KAAK,GAAG;AACVzB,IAAAA,KAAK,EAAE,EADG;AAEV0B,IAAAA,UAAU,EAAE;AAFF,GAAZ;AAKA7C,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM8C,OAAO,GAAG3B,KAAK,CAAC4B,IAAN,CAAYC,OAAD,IAAaA,OAAO,CAACC,GAAR,KAAgBC,IAAI,CAACD,GAA7C,CAAhB;AACAL,IAAAA,KAAK,CAACzB,KAAN,GAAc2B,OAAO,GAAGA,OAAO,CAAC3B,KAAX,GAAmB,EAAxC;AACAgC,IAAAA,OAAO,CAACC,GAAR,CAAYR,KAAK,CAACzB,KAAlB;AACD,GAJQ,EAIN,CAACA,KAAD,CAJM,CAAT;;AAMA,WAASkC,aAAT,CAAuBC,OAAvB,EAAgC;AAC9BV,IAAAA,KAAK,CAACC,UAAN,GAAmBS,OAAnB;AACD;;AAED,QAAMC,UAAU,GAAIC,KAAD,IAAW;AAC5BA,IAAAA,KAAK,CAACC,cAAN;AACAD,IAAAA,KAAK,CAACE,aAAN,CAAoBC,KAApB,CAA0BC,UAA1B,GAAuC,WAAvC,CAF4B,CAG5B;AACD,GAJD;;AAMA,QAAMC,MAAM,GAAG,CAACL,KAAD,EAAQvC,MAAR,EAAgBE,KAAhB,EAAuBE,QAAvB,EAAiCwB,UAAjC,KAAgD;AAC7DW,IAAAA,KAAK,CAACC,cAAN;AACAD,IAAAA,KAAK,CAACE,aAAN,CAAoBC,KAApB,CAA0BC,UAA1B,GAAuC,EAAvC,CAF6D,CAG7D;;AACA,QAAIE,MAAM,GAAGN,KAAK,CAACO,YAAN,CAAmBC,OAAnB,CAA2B,MAA3B,CAAb;AACA,QAAIC,KAAK,GACPpB,UAAU,KAAK1B,KAAK,CAAC+C,MAArB,IACArB,UAAU,KAAK,CADf,IAEA1B,KAAK,CAACgD,SAAN,CAAiBC,CAAD,IAAOA,CAAC,CAACnB,GAAF,KAAUJ,UAAjC,MAAiD,CAAC,CAFlD,GAGI1B,KAAK,CAACgD,SAAN,CAAiBC,CAAD,IAAOA,CAAC,CAACnB,GAAF,KAAUJ,UAAjC,CAHJ,GAIIA,UALN;AAMA,QAAIwB,IAAI,GAAG;AAAEpD,MAAAA,MAAF;AAAUgD,MAAAA,KAAV;AAAiBH,MAAAA;AAAjB,KAAX;AACAzC,IAAAA,QAAQ,CAACgD,IAAD,CAAR;AACD,GAbD;;AAeA,QAAMC,WAAW,GAAId,KAAD,IAAW;AAC7BA,IAAAA,KAAK,CAACE,aAAN,CAAoBC,KAApB,CAA0BC,UAA1B,GAAuC,EAAvC;AACD,GAFD;;AAIA,QAAMW,cAAc,GAAIf,KAAD,IAAW;AAChCA,IAAAA,KAAK,CAACC,cAAN;AACAD,IAAAA,KAAK,CAACE,aAAN,CAAoBC,KAApB,CAA0BC,UAA1B,GAAuC,WAAvC;AACD,GAHD;;AAKA,QAAMY,UAAU,GAAG,CAAChB,KAAD,EAAQiB,IAAR,EAAc5B,UAAd,EAA0BQ,aAA1B,KAA4C;AAC7DG,IAAAA,KAAK,CAACC,cAAN;AACAD,IAAAA,KAAK,CAACE,aAAN,CAAoBC,KAApB,CAA0BC,UAA1B,GAAuC,EAAvC;;AACA,QAAIa,IAAI,KAAK5B,UAAb,EAAyB;AACvBA,MAAAA,UAAU,GAAG4B,IAAb;AACApB,MAAAA,aAAa,CAACoB,IAAD,CAAb;AACAtB,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAQqB,IAApB;AACD;AACF,GARD;;AAUA,QAAMC,eAAe,GAAIlB,KAAD,IAAW;AACjCA,IAAAA,KAAK,CAACE,aAAN,CAAoBC,KAApB,CAA0BC,UAA1B,GAAuC,EAAvC;AACD,GAFD;;AAIA,sBACE,oBAAC,IAAD;AACE,IAAA,SAAS,EAAEjB,OAAO,CAACd,IADrB;AAEE,IAAA,UAAU,EAAG2B,KAAD,IAAWD,UAAU,CAACC,KAAD,CAFnC;AAGE,IAAA,MAAM,EAAGA,KAAD,IACNK,MAAM,CAACL,KAAD,EAAQvC,MAAR,EAAgB2B,KAAK,CAACzB,KAAtB,EAA6BE,QAA7B,EAAuCuB,KAAK,CAACC,UAA7C,CAJV;AAME,IAAA,WAAW,EAAGW,KAAD,IAAWc,WAAW,CAACd,KAAD,CANrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE,oBAAC,UAAD,CACE;AADF;AAEE,IAAA,KAAK,eACH,oBAAC,UAAD;AACE,MAAA,OAAO,EAAC,IADV;AAEE,MAAA,MAAM,EAAGA,KAAD,IACNgB,UAAU,CAAChB,KAAD,EAAQ,CAAR,EAAWZ,KAAK,CAACC,UAAjB,EAA6BQ,aAA7B,CAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMGnC,MANH,CAHJ;AAYE,IAAA,MAAM,eACJ,oBAAC,UAAD;AACE,MAAA,IAAI,EAAC,KADP;AAEE,oBAAW,QAFb;AAGE,MAAA,OAAO,EAAE,MAAME,UAAU,CAAC;AAAEH,QAAAA,MAAF;AAAU0D,QAAAA,MAAM,EAAE3D;AAAlB,OAAD,CAH3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,CAbJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eA8BE,oBAAC,WAAD;AAAa,IAAA,SAAS,EAAE2B,OAAO,CAACV,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAEU,OAAO,CAACV,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGW,KAAK,CAACzB,KAAN,IAAeyB,KAAK,CAACzB,KAAN,CAAY+C,MAAZ,GAAqB,CAApC,GACCtB,KAAK,CAACzB,KAAN,CAAYyD,GAAZ,CAAiBH,IAAD,IAAU;AACxB,wBACE;AAAK,MAAA,GAAG,EAAEA,IAAI,CAACxB,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGxB,WAAW,IAAIC,aAAa,CAACmD,QAAd,CAAuB5D,MAAvB,CAAf,gBACC,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,gBAGC,oBAAC,gBAAD;AACE,MAAA,aAAa,MADf;AAEE,MAAA,IAAI,EAAEwD,IAFR;AAGE,MAAA,MAAM,EAAExD,MAHV,CAIE;AAJF;AAKE,MAAA,cAAc,EAAE,MACdO,UAAU,CAAC;AAAEP,QAAAA,MAAF;AAAU6C,QAAAA,MAAM,EAAEW,IAAI,CAACxB;AAAvB,OAAD,CANd;AAQE,MAAA,UAAU,eACR,oBAAC,UAAD;AACE,QAAA,IAAI,EAAC,KADP;AAEE,sBAAW,QAFb;AAGE,QAAA,OAAO,EAAE,MACPzB,UAAU,CAAC;AAAEP,UAAAA,MAAF;AAAU6C,UAAAA,MAAM,EAAEW,IAAI,CAACxB;AAAvB,SAAD,CAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAOE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,CATJ;AAmBE,MAAA,YAAY,EAAE1B,QAnBhB;AAoBE,MAAA,UAAU,EAAGiC,KAAD,IAAWe,cAAc,CAACf,KAAD,CApBvC;AAqBE,MAAA,MAAM,EAAGA,KAAD,IACNgB,UAAU,CACRhB,KADQ,EAERiB,IAAI,CAACxB,GAFG,EAGRL,KAAK,CAACC,UAHE,EAIRQ,aAJQ,CAtBd;AA6BE,MAAA,WAAW,EAAGG,KAAD,IAAWkB,eAAe,CAAClB,KAAD,CA7BzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CADF;AAuCD,GAxCD,CADD,gBA2CC,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAC,QAAlB;AAA2B,IAAA,OAAO,EAAC,IAAnC;AAAwC,IAAA,SAAS,EAAEb,OAAO,CAACV,OAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA5CJ,CADF,CA9BF,eAkFE,oBAAC,WAAD;AACE,IAAA,MAAM,EAAGuB,KAAD,IACNgB,UAAU,CAAChB,KAAD,EAAQrC,KAAK,CAAC+C,MAAd,EAAsBtB,KAAK,CAACC,UAA5B,EAAwCQ,aAAxC,CAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE;AAAK,IAAA,SAAS,EAAEV,OAAO,CAACL,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AACE,IAAA,MAAM,EAAC,UADT;AAEE,IAAA,MAAM,EAAE;AAAE,mBAAa;AAAf,KAFV;AAGE,IAAA,WAAW,EAAEhB,OAHf;AAIE,IAAA,IAAI,EAAE;AAAEL,MAAAA,MAAM,EAAEA,MAAV;AAAkBD,MAAAA,OAAO,EAAEA;AAA3B,KAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CALF,CAlFF,CADF;AAmGD,CApMD;;AAsMAD,aAAa,CAAC+D,SAAd,GAA0B;AACxB9D,EAAAA,OAAO,EAAEf,SAAS,CAAC8E,MAAV,CAAiBC,UADF;AAExB/D,EAAAA,MAAM,EAAEhB,SAAS,CAAC8E,MAAV,CAAiBC,UAFD;AAGxB9D,EAAAA,MAAM,EAAEjB,SAAS,CAAC8E,MAAV,CAAiBC,UAHD;AAIxB7D,EAAAA,KAAK,EAAElB,SAAS,CAACgF,OAAV,CACLhF,SAAS,CAACiF,KAAV,CAAgB;AACdjC,IAAAA,GAAG,EAAEhD,SAAS,CAAC8E,MAAV,CAAiBC,UADR;AAEdG,IAAAA,IAAI,EAAElF,SAAS,CAAC8E,MAAV,CAAiBC,UAFT;AAGdI,IAAAA,QAAQ,EAAEnF,SAAS,CAACoF,KAAV,CAAgBL;AAHZ,GAAhB,CADK,EAMLA,UAVsB;AAWxBvD,EAAAA,WAAW,EAAExB,SAAS,CAACqF,IAAV,CAAeN,UAXJ;AAaxB5D,EAAAA,UAAU,EAAEnB,SAAS,CAACsF,IAAV,CAAeP,UAbH;AAcxB3D,EAAAA,QAAQ,EAAEpB,SAAS,CAACsF,IAAV,CAAeP,UAdD;AAexB1D,EAAAA,OAAO,EAAErB,SAAS,CAACsF,IAAV,CAAeP,UAfA;AAgBxB;AACAxD,EAAAA,UAAU,EAAEvB,SAAS,CAACsF,IAAV,CAAeP;AAjBH,CAA1B;AAoBA,SAASjE,aAAT","sourcesContent":["import React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport List from \"@material-ui/core/List\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { EditableListItem } from \"./ListItems\";\nimport { AddDialog } from \"../Dialog.js\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst DraggableList = ({\n  sheetId,\n  listId,\n  header,\n  items,\n  deleteList,\n  moveItem,\n  addItem,\n  editItem,\n  deleteItem,\n  itemLoading,\n  listIdLoading,\n}) => {\n  const useStyles = makeStyles((theme) => ({\n    card: {\n      maxHeight: \"30vh\",\n      width: \"25vw\",\n      position: \"relative\",\n    },\n    // header: { padding: theme.spacing(1, 2, 0, 2) },\n    content: {\n      height: \"20vh\",\n      overflowY: \"auto\",\n      padding: theme.spacing(0, 2),\n    },\n\n    addButton: {\n      position: \"absolute\",\n      bottom: \"2vh\",\n      right: \"4vh\",\n    },\n    hide: {\n      display: \"none\",\n    },\n  }));\n\n  const classes = useStyles();\n\n  let state = {\n    items: [],\n    bottomItem: 0,\n  };\n\n  useEffect(() => {\n    const listObj = items.find((itemObj) => itemObj._id === list._id);\n    state.items = listObj ? listObj.items : [];\n    console.log(state.items);\n  }, [items]);\n\n  function setBottomItem(newItem) {\n    state.bottomItem = newItem;\n  }\n\n  const onDragOver = (event) => {\n    event.preventDefault();\n    event.currentTarget.style.background = \"lightgray\";\n    // event.currentTarget.style.cursor = \"grabbing\";\n  };\n\n  const onDrop = (event, listId, items, moveItem, bottomItem) => {\n    event.preventDefault();\n    event.currentTarget.style.background = \"\";\n    // event.currentTarget.style.cursor = \"default\";\n    let itemId = event.dataTransfer.getData(\"item\");\n    let index =\n      bottomItem !== items.length &&\n      bottomItem !== 0 &&\n      items.findIndex((i) => i._id === bottomItem) !== -1\n        ? items.findIndex((i) => i._id === bottomItem)\n        : bottomItem;\n    let body = { listId, index, itemId };\n    moveItem(body);\n  };\n\n  const onDragLeave = (event) => {\n    event.currentTarget.style.background = \"\";\n  };\n\n  const onDragOverItem = (event) => {\n    event.preventDefault();\n    event.currentTarget.style.background = \"lightblue\";\n  };\n\n  const onDropItem = (event, item, bottomItem, setBottomItem) => {\n    event.preventDefault();\n    event.currentTarget.style.background = \"\";\n    if (item !== bottomItem) {\n      bottomItem = item;\n      setBottomItem(item);\n      console.log(\"set\" + item);\n    }\n  };\n\n  const onDragLeaveItem = (event) => {\n    event.currentTarget.style.background = \"\";\n  };\n\n  return (\n    <Card\n      className={classes.card}\n      onDragOver={(event) => onDragOver(event)}\n      onDrop={(event) =>\n        onDrop(event, listId, state.items, moveItem, state.bottomItem)\n      }\n      onDragLeave={(event) => onDragLeave(event)}\n    >\n      <CardHeader\n        // className={classes.header}\n        title={\n          <Typography\n            variant=\"h5\"\n            onDrop={(event) =>\n              onDropItem(event, 0, state.bottomItem, setBottomItem)\n            }\n          >\n            {header}\n          </Typography>\n        }\n        action={\n          <IconButton\n            edge=\"end\"\n            aria-label=\"delete\"\n            onClick={() => deleteList({ listId, pageId: sheetId })}\n          >\n            <CloseIcon />\n          </IconButton>\n        }\n      />\n      <CardContent className={classes.content}>\n        <List className={classes.content}>\n          {state.items && state.items.length > 0 ? (\n            state.items.map((item) => {\n              return (\n                <div key={item._id}>\n                  {itemLoading && listIdLoading.includes(listId) ? (\n                    <CircularProgress />\n                  ) : (\n                    <EditableListItem\n                      draggableItem\n                      item={item}\n                      listId={listId}\n                      // sheetId={sheetId}\n                      deleteFunction={() =>\n                        deleteItem({ listId, itemId: item._id })\n                      }\n                      deleteIcon={\n                        <IconButton\n                          edge=\"end\"\n                          aria-label=\"delete\"\n                          onClick={() =>\n                            deleteItem({ listId, itemId: item._id })\n                          }\n                        >\n                          <DeleteIcon />\n                        </IconButton>\n                      }\n                      editFunction={editItem}\n                      onDragOver={(event) => onDragOverItem(event)}\n                      onDrop={(event) =>\n                        onDropItem(\n                          event,\n                          item._id,\n                          state.bottomItem,\n                          setBottomItem\n                        )\n                      }\n                      onDragLeave={(event) => onDragLeaveItem(event)}\n                    />\n                  )}\n                </div>\n              );\n            })\n          ) : (\n            <Typography align=\"center\" variant=\"h6\" className={classes.content}>\n              No items\n            </Typography>\n          )}\n        </List>\n      </CardContent>\n\n      <CardActions\n        onDrop={(event) =>\n          onDropItem(event, items.length, state.bottomItem, setBottomItem)\n        }\n      >\n        <div className={classes.addButton}>\n          <AddDialog\n            header=\"Add Item\"\n            fields={{ \"Item Name\": \"name\" }}\n            addFunction={addItem}\n            body={{ listId: listId, sheetId: sheetId }}\n          />\n        </div>\n      </CardActions>\n    </Card>\n  );\n};\n\nDraggableList.propTypes = {\n  sheetId: PropTypes.string.isRequired,\n  listId: PropTypes.string.isRequired,\n  header: PropTypes.string.isRequired,\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      _id: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n      subItems: PropTypes.array.isRequired,\n    })\n  ).isRequired,\n  itemLoading: PropTypes.bool.isRequired,\n\n  deleteList: PropTypes.func.isRequired,\n  moveItem: PropTypes.func.isRequired,\n  addItem: PropTypes.func.isRequired,\n  // editItem: PropTypes.func.isRequired,\n  deleteItem: PropTypes.func.isRequired,\n};\n\nexport { DraggableList };\n"]},"metadata":{},"sourceType":"module"}